% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/simulate.R
\name{simulate_population_dynamics}
\alias{simulate_population_dynamics}
\title{Simulate Population Dynamics with IDP Flows}
\usage{
simulate_population_dynamics(
  daily_data,
  initial_population,
  idp_in_col = "idp_in",
  idp_out_col = "idp_out"
)
}
\arguments{
\item{daily_data}{A data frame of daily simulation data by region. It must contain
at least a \code{date} column and one or more region identifier columns (e.g.,
region names or codes). It should also contain columns for IDP inflows and outflows
(or a single net flow column), unless no displacement is being modeled.}

\item{initial_population}{Numeric value or vector giving the initial population at
the start of the simulation for each lowest-level region. If a single number is
provided, all regions start with that population. If a vector is provided, it
should be either:
\itemize{
\item A named vector, where names correspond to the region identifiers in
\code{daily_data} (matching the lowest-level region names or IDs).
\item An unnamed vector with length equal to the number of lowest-level regions
(in the same order as the regions appear when grouping \code{daily_data}
by region).
}}

\item{idp_in_col}{Name of the column in \code{daily_data} representing IDP inflows
to a region. Defaults to \code{"idp_in"}. If this column is not found, the function
will interpret the data differently (see Details).}

\item{idp_out_col}{Name of the column in \code{daily_data} representing IDP outflows
from a region. Defaults to \code{"idp_out"}. If this column is not found or set to
\code{NULL}, and an inflow column is present, that inflow is assumed to represent
net population change (positive for influx, negative for outflux).}
}
\value{
The \code{daily_data} data frame with an additional column \code{population},
giving the simulated population for each region on each day.
}
\description{
Simulates changes in population over time for each region, driven by daily inward
and outward movements of internally displaced persons (IDPs). This function updates
the population for each day based on the previous day's population and net IDP flow.
}
\details{
The population on the first day for each region is set to the given
\code{initial_population}. Thereafter, for each subsequent day (per region), the
population is updated as:
\deqn{population_{t} = population_{t-1} + \text{IDP_in}_{t} - \text{IDP_out}_{t}}
If only a single net flow column is available (e.g., total net change in population),
specify that column as \code{idp_in_col} and set \code{idp_out_col = NULL} (or leave
it absent in the data). In that case, positive values in the inflow column will
increase the population and negative values will decrease it.

If no IDP flow columns are present in \code{daily_data}, this function will simply
assign the initial population to all days (i.e., population remains constant over time
in each region).
}
\examples{
# Example daily data for 2 regions over 3 days
daily <- data.frame(
  region = rep(c("Region1", "Region2"), each = 3),
  date = rep(seq.Date(as.Date("2021-01-01"), by = "day", length.out = 3), 2),
  idp_in = c(5, 2, 0,  3, 1, 0),   # IDP inflows
  idp_out = c(1, 0, 0,  2, 2, 1)   # IDP outflows
)
init_pop <- c(Region1 = 100, Region2 = 200)
result <- simulate_population_dynamics(daily, initial_population = init_pop)
result$population  # population trajectory for each region
}
