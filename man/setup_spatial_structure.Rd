% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/structures.R
\name{setup_spatial_structure}
\alias{setup_spatial_structure}
\title{Set up Spatial Structure for Simulation}
\usage{
setup_spatial_structure(spatial_structure = 1, level_names = NULL)
}
\arguments{
\item{spatial_structure}{Specification of the spatial layout. This can be:
\itemize{
\item A data frame containing at least one column of region identifiers (and
optionally higher-level region columns). If provided, it will be returned
as-is (after ensuring the lowest level column is last).
\item A named numeric vector defining the number of units at each hierarchy level
(from top level to bottom level). For example, \code{c(country = 1, region = 2, district = 4)}
means 1 country, 2 regions (total), and 4 districts (total), distributed
as evenly as possible under those 2 regions.
\item An unnamed numeric vector of length > 1, giving the number of units at each
level (defaults to generic names "Level1", "Level2", ... if no \code{level_names} provided).
\item A single numeric value, interpreted as the number of lowest-level regions
(with a single top-level grouping if a name is provided for that level).
\item A character vector of region names (for the lowest level; a single top-level
grouping will be added if no higher level is specified).
}}

\item{level_names}{Optional character vector of names for each hierarchy level (used
when \code{spatial_structure} is numeric and unnamed, or when a character vector of
region names is provided). The order should be from top level to bottom level.}
}
\value{
A data frame where each row corresponds to one lowest-level region. The data
frame includes one column for each hierarchical level (with the lowest level last).
If only one level is defined, the column will be named "region" (or the provided name
for that level). If a single top-level grouping is implied (e.g., only one country),
it will still be included as a column for consistency.
}
\description{
Prepares a data frame of regions (lowest administrative units) for the simulation,
including any specified hierarchical levels and names.
}
\details{
The hierarchy is constructed such that lowest-level units are distributed as
evenly as possible among their parent units at the next level up. If the numbers do
not divide evenly, some parent units will have one more sub-unit than others. This
function ensures that even with uneven splits, all specified units are created and
assigned appropriately.

If a data frame is provided as \code{spatial_structure}, it should already contain the
desired hierarchy columns (e.g., columns for each admin level). The function will
return it (after moving the lowest level column to the last position if it isn't already).
}
\examples{
# Example 1: Numeric hierarchy specification (1 country, 2 regions, 4 districts)
setup_spatial_structure(c(country = 1, region = 2, district = 4))

# Example 2: Provide only the number of regions (no hierarchy above)
setup_spatial_structure(3)

# Example 3: Provide explicit names for lowest-level regions
setup_spatial_structure(c("North", "South", "East"))

# Example 4: Use a custom data frame for regions
regions_df <- data.frame(country = "X", region = c("A", "B"), district = c("A1", "B1"))
setup_spatial_structure(regions_df)
}
